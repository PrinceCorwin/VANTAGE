<UserControl x:Class="VANTAGE.Controls.ColumnFilterPopup"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignHeight="400"
             d:DesignWidth="300"
             Width="320"
             Background="{StaticResource ControlBackground}"
             BorderBrush="{StaticResource BorderColor}"
             BorderThickness="1"
             Foreground="{StaticResource ForegroundColor}"
             FontFamily="{StaticResource FontFamilyPrimary}"
             FontSize="{StaticResource FontSizeNormal}">
    <Border Background="{StaticResource ControlBackground}" Padding="10">
        <StackPanel Margin="6">
            <!-- Sort Options -->
            <StackPanel Orientation="Vertical" Margin="0,0,0,10">
                <Button x:Name="btnSortAsc" Content="Sort A-Z" Width="120" Margin="0,0,0,6" Click="BtnSortAsc_Click" Visibility="Collapsed"/>
                <Button x:Name="btnSortDesc" Content="Sort Z-A" Width="120" Margin="0,0,0,6" Click="BtnSortDesc_Click" Visibility="Collapsed"/>
                <Button x:Name="btnSortNumAsc" Content="Smallest to Largest" Width="160" Margin="0,0,0,6" Click="BtnSortNumAsc_Click" Visibility="Collapsed"/>
                <Button x:Name="btnSortNumDesc" Content="Largest to Smallest" Width="160" Margin="0,0,0,6" Click="BtnSortNumDesc_Click" Visibility="Collapsed"/>
                <Button x:Name="btnSortDateAsc" Content="Oldest to Newest" Width="160" Margin="0,0,0,6" Click="BtnSortDateAsc_Click" Visibility="Collapsed"/>
                <Button x:Name="btnSortDateDesc" Content="Newest to Oldest" Width="160" Margin="0,0,0,6" Click="BtnSortDateDesc_Click" Visibility="Collapsed"/>
            </StackPanel>

            <!-- Header: Clear on its own line, Text Filters on a separate line -->
            <StackPanel Orientation="Vertical">
                <Button x:Name="btnClearFrom"
                        Background="Transparent"
                        BorderThickness="0"
                        Padding="2"
                        HorizontalAlignment="Right"
                        Click="BtnClearFrom_Click"
                        Content="Clear Column Filter" />

                <Button x:Name="btnTextFilters"
                        Content="Text Filters ▸"
                        Background="Transparent"
                        BorderThickness="0"
                        Padding="2"
                        HorizontalAlignment="Right"
                        Margin="0,6,0,0"
                        Click="BtnTextFilters_Click"/>
            </StackPanel>

            <!-- Search -->
            <TextBox x:Name="txtSearch" Height="30" Margin="0,8,0,8" Padding="6"
                     Background="{StaticResource ControlBackground}"
                     Foreground="{StaticResource ForegroundColor}"
                     BorderBrush="{StaticResource BorderColor}"
                     TextChanged="TxtSearch_TextChanged"/>

            <!-- Select All -->
            <CheckBox x:Name="chkSelectAll" Foreground="{StaticResource ForegroundColor}" Content="(Select All)" Margin="2" Checked="ChkSelectAll_Checked" Unchecked="ChkSelectAll_Unchecked"/>

            <!-- Values list -->
            <Border BorderBrush="{StaticResource BorderColor}" BorderThickness="1" Background="{StaticResource ControlBackground}">
                <ScrollViewer Height="220">
                    <ItemsControl x:Name="itemsValues">
                        <!-- Items will be added dynamically as CheckBoxes -->
                    </ItemsControl>
                </ScrollViewer>
            </Border>

            <TextBlock x:Name="txtTooMany" Foreground="Orange" Margin="2" Visibility="Collapsed">Too Many To Display</TextBlock>

            <!-- Action Buttons -->
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,8,0,0">
                <Button Content="Cancel" Width="70" Height="30" Margin="0,0,8,0" Click="Cancel_Click"/>
                <Button Content="OK" Width="70" Height="30" Background="{StaticResource AccentColor}" Foreground="{StaticResource ForegroundColor}" Click="Ok_Click"/>
            </StackPanel>

            <!-- Filter UI Placeholder: will be shown based on column type in code-behind -->
            <ContentControl x:Name="filterContent" />
        </StackPanel>
    </Border>
</UserControl>