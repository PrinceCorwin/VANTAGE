<Window x:Class="VANTAGE.Dialogs.ProcoreAuthDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Connect to Procore"
        Height="360"
        Width="500"
        WindowStartupLocation="CenterOwner"
        Background="{DynamicResource BackgroundColor}"
        ResizeMode="NoResize"
        WindowStyle="SingleBorderWindow">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="20"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="20"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="20"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0">
            <TextBlock Text="Connect to Procore" 
                       FontWeight="SemiBold" 
                       FontSize="16" 
                       Foreground="{DynamicResource ForegroundColor}"/>
            <TextBlock Text="Link your Procore account to fetch drawings for work packages."
                       Foreground="{DynamicResource ForegroundColor}"
                       Opacity="0.6"
                       FontSize="12"
                       Margin="0,5,0,0"/>
        </StackPanel>

        <!-- Instructions -->
        <StackPanel Grid.Row="2">
            <TextBlock Text="1. Click 'Open Procore Login' to sign in with your Procore account"
                       Foreground="{DynamicResource ForegroundColor}"
                       Opacity="0.7"
                       Margin="0,0,0,5"/>
            <TextBlock Text="2. After signing in, copy the authorization code shown"
                       Foreground="{DynamicResource ForegroundColor}"
                       Opacity="0.7"
                       Margin="0,0,0,5"/>
            <TextBlock Text="3. Paste the code below and click Connect"
                       Foreground="{DynamicResource ForegroundColor}"
                       Opacity="0.7"/>
        </StackPanel>

        <!-- Open Browser Button -->
        <Button x:Name="btnOpenBrowser" 
                Grid.Row="4"
                Content="Open Procore Login" 
                Width="160"
                Height="32"
                HorizontalAlignment="Left"
                Background="{DynamicResource ControlBackground}"
                Foreground="{DynamicResource ForegroundColor}"
                BorderBrush="{DynamicResource ControlBorder}"
                BorderThickness="1"
                Click="BtnOpenBrowser_Click"/>

        <!-- Auth Code Input -->
        <StackPanel Grid.Row="6">
            <TextBlock Text="Authorization Code:" 
                       Foreground="{DynamicResource ForegroundColor}"
                       Opacity="0.7"
                       Margin="0,0,0,5"/>
            <TextBox x:Name="txtAuthCode" 
                     Height="28"
                     Background="{DynamicResource ControlBackground}"
                     Foreground="{DynamicResource ForegroundColor}"
                     BorderBrush="{DynamicResource ControlBorder}"
                     BorderThickness="1"
                     VerticalContentAlignment="Center"
                     Padding="5,0"
                     TextChanged="TxtAuthCode_TextChanged"/>
        </StackPanel>

        <!-- Buttons -->
        <StackPanel Grid.Row="8" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Right">
            <Button x:Name="btnCancel"
                    Content="Cancel"
                    Width="100"
                    Height="35"
                    Margin="0,0,10,0"
                    Background="{DynamicResource ControlBackground}"
                    Foreground="{DynamicResource ForegroundColor}"
                    BorderBrush="{DynamicResource ControlBorder}"
                    BorderThickness="1"
                    Click="BtnCancel_Click"/>
            <Button x:Name="btnConnect"
                    Content="Connect"
                    Width="100"
                    Height="35"
                    Background="{DynamicResource ControlBackground}"
                    Foreground="{DynamicResource ForegroundColor}"
                    BorderBrush="{DynamicResource ControlBorder}"
                    BorderThickness="1"
                    IsEnabled="False"
                    Click="BtnConnect_Click"/>
        </StackPanel>
    </Grid>
</Window>