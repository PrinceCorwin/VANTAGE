<Window x:Class="VANTAGE.Dialogs.ConnectionRetryDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Azure Database Connection Error"
        Icon="pack://application:,,,/images/AppIcon.ico"
        Height="370"
        Width="500"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Background="{DynamicResource WindowBackground}">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Error Icon and Title -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,15">
            <TextBlock Text="⚠"
                       FontSize="32"
                       Foreground="Orange"
                       VerticalAlignment="Center"
                       Margin="0,0,15,0"/>
            <TextBlock Text="Cannot connect to Azure database"
                       FontSize="16"
                       FontWeight="Bold"
                       Foreground="{DynamicResource ForegroundColor}"
                       VerticalAlignment="Center"/>
        </StackPanel>

        <!-- Error Message -->
        <Border Grid.Row="1"
                Background="{DynamicResource ControlBackground}"
                BorderBrush="{DynamicResource BorderColor}"
                BorderThickness="1"
                Padding="15"
                Margin="0,0,0,10">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <TextBlock x:Name="txtErrorMessage"
                           TextWrapping="Wrap"
                           Foreground="{DynamicResource TextColorSecondary}"
                           FontSize="12"/>
            </ScrollViewer>
        </Border>

        <!-- IP Address Section -->
        <StackPanel Grid.Row="2" Margin="0,0,0,15">
            <TextBlock Text="If this is your first time connecting on this network, provide your IP address to your administrator to request firewall access."
                       TextWrapping="Wrap"
                       Foreground="{DynamicResource TextColorSecondary}"
                       FontSize="11"
                       Margin="0,0,0,6"/>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="Your public IP:"
                           Foreground="{DynamicResource ForegroundColor}"
                           FontSize="12"
                           VerticalAlignment="Center"
                           Margin="0,0,8,0"/>
                <TextBlock x:Name="txtPublicIp"
                           Text="Detecting..."
                           FontFamily="Consolas"
                           FontSize="13"
                           FontWeight="SemiBold"
                           Foreground="{DynamicResource AccentColor}"
                           VerticalAlignment="Center"
                           Margin="0,0,10,0"/>
                <Button x:Name="btnCopyIp"
                        Content="COPY"
                        Width="60"
                        Height="24"
                        FontSize="10"
                        IsEnabled="False"
                        ToolTip="Copy IP address to clipboard"
                        Background="{DynamicResource ControlBackground}"
                        Foreground="{DynamicResource ForegroundColor}"
                        BorderBrush="{DynamicResource BorderColor}"
                        BorderThickness="1"
                        Click="BtnCopyIp_Click"/>
            </StackPanel>
        </StackPanel>

        <!-- Buttons -->
        <StackPanel Grid.Row="3"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right">
            <Button x:Name="btnRetry"
                    Content="RETRY"
                    Width="120"
                    Height="35"
                    Margin="0,0,10,0"
                    Background="{DynamicResource AccentColor}"
                    Foreground="White"
                    BorderBrush="{DynamicResource AccentColor}"
                    BorderThickness="1"
                    FontWeight="SemiBold"
                    Click="BtnRetry_Click"
                    IsDefault="True"/>

            <Button x:Name="btnWorkOffline"
                    Content="WORK OFFLINE"
                    Width="120"
                    Height="35"
                    Background="{DynamicResource ControlBackground}"
                    Foreground="{DynamicResource ForegroundColor}"
                    BorderBrush="{DynamicResource BorderColor}"
                    BorderThickness="1"
                    Click="BtnWorkOffline_Click"
                    IsCancel="True"/>
        </StackPanel>
    </Grid>
</Window>