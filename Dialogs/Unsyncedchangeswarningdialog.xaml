<Window x:Class="VANTAGE.Dialogs.UnsyncedChangesWarningDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Warning: Unsaved Changes"
        Height="400"
        Width="500"
        WindowStartupLocation="CenterOwner"
        Background="{DynamicResource WindowBackground}"
        ResizeMode="NoResize"
        ShowInTaskbar="False">

    <Grid Margin="25">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Warning Icon and Header -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,15">
            <TextBlock Text="⚠"
                       FontSize="28"
                       Foreground="{DynamicResource WarningText}"
                       VerticalAlignment="Center"
                       Margin="0,0,12,0"/>
            <TextBlock Text="Unsaved Changes Will Be Lost"
                       FontSize="20"
                       FontWeight="Bold"
                       Foreground="{DynamicResource ForegroundColor}"
                       VerticalAlignment="Center"/>
        </StackPanel>

        <!-- Description Text -->
        <TextBlock Grid.Row="1"
                   TextWrapping="Wrap"
                   Foreground="{DynamicResource ForegroundColor}"
                   FontSize="13"
                   Margin="0,0,0,15">
            <Run Text="The following projects have unsaved local edits that have "/>
            <Run Text="NOT" FontWeight="Bold" Foreground="{DynamicResource WarningHighlight}"/>
            <Run Text=" been synced to Central. If you continue, these changes will be permanently lost:"/>
        </TextBlock>

        <!-- Project List with Dirty Counts -->
        <Border Grid.Row="2"
                Background="{DynamicResource ControlBackground}"
                BorderBrush="{DynamicResource ControlBorder}"
                BorderThickness="1"
                Margin="0,0,0,15">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <ItemsControl x:Name="projectList" Margin="10">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Grid Margin="0,6">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0" Orientation="Horizontal">
                                    <TextBlock Text="•"
                                               Foreground="{DynamicResource WarningHighlight}"
                                               FontSize="14"
                                               Margin="0,0,8,0"/>
                                    <TextBlock Foreground="{DynamicResource ForegroundColor}" FontSize="13">
                                        <Run Text="{Binding ProjectID}" FontWeight="SemiBold"/>
                                        <Run Text=" - "/>
                                        <Run Text="{Binding ProjectName}" Foreground="{DynamicResource TextColorSecondary}"/>
                                    </TextBlock>
                                </StackPanel>

                                <Border Grid.Column="1"
                                        Background="{DynamicResource WarningHighlightBackground}"
                                        CornerRadius="3"
                                        Padding="8,2">
                                    <TextBlock Foreground="{DynamicResource WarningHighlight}"
                                               FontWeight="Bold"
                                               FontSize="12">
                                        <Run Text="{Binding DirtyCount}"/>
                                        <Run Text=" unsaved"/>
                                    </TextBlock>
                                </Border>
                            </Grid>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </Border>

        <!-- Summary Text -->
        <TextBlock Grid.Row="3"
                   x:Name="txtSummary"
                   TextWrapping="Wrap"
                   Foreground="{DynamicResource TextColorSecondary}"
                   FontSize="12"
                   FontStyle="Italic"
                   Margin="0,0,0,20"
                   Text="To keep these changes, click 'No, Go Back' and check these projects before syncing."/>

        <!-- Buttons -->
        <Grid Grid.Row="4">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Spacer -->
            <Border Grid.Column="0"/>

            <!-- No, Go Back Button (Safe Option - Emphasized) -->
            <Button x:Name="btnGoBack"
                    Grid.Column="1"
                    Content="No, Go Back"
                    Width="120"
                    Height="38"
                    Margin="0,0,12,0"
                    Background="{DynamicResource AccentColor}"
                    Foreground="{DynamicResource ForegroundColor}"
                    BorderBrush="{DynamicResource AccentColor}"
                    BorderThickness="1"
                    FontWeight="SemiBold"
                    Click="BtnGoBack_Click"/>

            <!-- Yes, I'm Sure Button (Destructive - Subtle) -->
            <Button x:Name="btnConfirm"
                    Grid.Column="2"
                    Content="Yes, I'm Sure"
                    Width="120"
                    Height="38"
                    Background="{DynamicResource ControlBackground}"
                    Foreground="{DynamicResource WarningHighlight}"
                    BorderBrush="{DynamicResource WarningHighlight}"
                    BorderThickness="1"
                    Click="BtnConfirm_Click"/>
        </Grid>
    </Grid>
</Window>